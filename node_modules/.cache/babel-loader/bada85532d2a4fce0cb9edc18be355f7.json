{"ast":null,"code":"import _asyncToGenerator from\"/home/qburst/diagnal-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/home/qburst/diagnal-app/node_modules/@babel/runtime/regenerator/index.js\";import*as types from'./types';export var fetchData=function fetchData(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch,getState){var state,currentPage;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:state=getState();currentPage=state['page-num-requested']||0;fetch(\"json/CONTENTLISTINGPAGE-PAGE\".concat(+currentPage+1,\".json\"),{headers:{'Content-Type':'application/json','Accept':'application/json'}}).then(function(response){return response.json();}).then(function(data){dispatch({type:types.DATA_RECEIVED,payload:data.page});});case 3:case\"end\":return _context.stop();}}},_callee);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();};export var searchList=function searchList(keyword){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch,getState){var state,urls;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:state=getState();urls=['json/CONTENTLISTINGPAGE-PAGE1.json','json/CONTENTLISTINGPAGE-PAGE2.json','json/CONTENTLISTINGPAGE-PAGE3.json'];Promise.all(urls.map(function(url){return fetch(url).then(function(e){return e.json();});})).then(function(data){var list=data.flatMap(function(_ref3){var page=_ref3.page;return page['content-items']['content'];});var result=list.filter(function(data){return data.name.toLowerCase().includes(keyword.toLowerCase());});dispatch({type:types.SEARCH,payload:{keyword:keyword,result:result}});});case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x3,_x4){return _ref2.apply(this,arguments);};}();};","map":{"version":3,"names":["types","fetchData","dispatch","getState","state","currentPage","fetch","headers","then","response","json","data","type","DATA_RECEIVED","payload","page","searchList","keyword","urls","Promise","all","map","url","e","list","flatMap","result","filter","name","toLowerCase","includes","SEARCH"],"sources":["/home/qburst/diagnal-app/src/action.js"],"sourcesContent":["import * as types from './types';\n\nexport const fetchData = () =>\nasync (dispatch, getState) => {\n  const state = getState()\n  const currentPage = state['page-num-requested'] || 0\n  fetch(`json/CONTENTLISTINGPAGE-PAGE${+currentPage + 1}.json`\n    ,{\n      headers : { \n        'Content-Type': 'application/json',\n        'Accept': 'application/json'\n       }\n    })\n    .then(function(response){\n      return response.json();\n    })\n    .then(function(data) {\n      dispatch({\n        type: types.DATA_RECEIVED,\n        payload: data.page\n      })\n    });\n}\n\nexport const searchList = (keyword) =>\nasync (dispatch, getState) => {\n  const state = getState()\n  const urls = ['json/CONTENTLISTINGPAGE-PAGE1.json', 'json/CONTENTLISTINGPAGE-PAGE2.json', 'json/CONTENTLISTINGPAGE-PAGE3.json'];\n  Promise.all(urls.map((url) => fetch(url).then((e) => e.json()))).then(\n    (data) => { \n        const list = data.flatMap(({page})=> page['content-items']['content']);\n        const result = list.filter(data => data.name.toLowerCase().includes(keyword.toLowerCase()))\n        dispatch({\n          type: types.SEARCH,\n          payload: {keyword, result}\n        })\n    });\n}"],"mappings":"+NAAA,MAAO,GAAKA,CAAAA,KAAZ,KAAuB,SAAvB,CAEA,MAAO,IAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,kGACzB,iBAAOC,QAAP,CAAiBC,QAAjB,wIACQC,KADR,CACgBD,QAAQ,EADxB,CAEQE,WAFR,CAEsBD,KAAK,CAAC,oBAAD,CAAL,EAA+B,CAFrD,CAGEE,KAAK,uCAAgC,CAACD,WAAD,CAAe,CAA/C,UACF,CACCE,OAAO,CAAG,CACR,eAAgB,kBADR,CAER,SAAU,kBAFF,CADX,CADE,CAAL,CAOGC,IAPH,CAOQ,SAASC,QAAT,CAAkB,CACtB,MAAOA,CAAAA,QAAQ,CAACC,IAAT,EAAP,CACD,CATH,EAUGF,IAVH,CAUQ,SAASG,IAAT,CAAe,CACnBT,QAAQ,CAAC,CACPU,IAAI,CAAEZ,KAAK,CAACa,aADL,CAEPC,OAAO,CAAEH,IAAI,CAACI,IAFP,CAAD,CAAR,CAID,CAfH,EAHF,sDADyB,oEAAlB,CAsBP,MAAO,IAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACC,OAAD,kGAC1B,kBAAOf,QAAP,CAAiBC,QAAjB,qIACQC,KADR,CACgBD,QAAQ,EADxB,CAEQe,IAFR,CAEe,CAAC,oCAAD,CAAuC,oCAAvC,CAA6E,oCAA7E,CAFf,CAGEC,OAAO,CAACC,GAAR,CAAYF,IAAI,CAACG,GAAL,CAAS,SAACC,GAAD,QAAShB,CAAAA,KAAK,CAACgB,GAAD,CAAL,CAAWd,IAAX,CAAgB,SAACe,CAAD,QAAOA,CAAAA,CAAC,CAACb,IAAF,EAAP,EAAhB,CAAT,EAAT,CAAZ,EAAiEF,IAAjE,CACE,SAACG,IAAD,CAAU,CACN,GAAMa,CAAAA,IAAI,CAAGb,IAAI,CAACc,OAAL,CAAa,mBAAEV,CAAAA,IAAF,OAAEA,IAAF,OAAWA,CAAAA,IAAI,CAAC,eAAD,CAAJ,CAAsB,SAAtB,CAAX,EAAb,CAAb,CACA,GAAMW,CAAAA,MAAM,CAAGF,IAAI,CAACG,MAAL,CAAY,SAAAhB,IAAI,QAAIA,CAAAA,IAAI,CAACiB,IAAL,CAAUC,WAAV,GAAwBC,QAAxB,CAAiCb,OAAO,CAACY,WAAR,EAAjC,CAAJ,EAAhB,CAAf,CACA3B,QAAQ,CAAC,CACPU,IAAI,CAAEZ,KAAK,CAAC+B,MADL,CAEPjB,OAAO,CAAE,CAACG,OAAO,CAAPA,OAAD,CAAUS,MAAM,CAANA,MAAV,CAFF,CAAD,CAAR,CAIH,CARH,EAHF,wDAD0B,sEAAnB"},"metadata":{},"sourceType":"module"}